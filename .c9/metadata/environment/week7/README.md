{"filter":false,"title":"README.md","tooltip":"/week7/README.md","undoManager":{"mark":23,"position":23,"stack":[[{"start":{"row":0,"column":0},"end":{"row":74,"column":87},"action":"insert","lines":["","# Weekly Assignment 7","","## Assignment Description","","Finish parsing and cleaning the rest of the data in my assigned \"zone 9\" and all other zones, and update/replace my PostgreSQL table(s) with the new data. ","","## Parse All Data","**Step 1 Reexamine txt file's Structure**","In Week2 assignment, I used following code to target on the address details:","```javascript","$('td').each(function(i, ele) {","    if($(ele).attr(\"style\")==='border-bottom:1px solid #e3e3e3; width:260px'){","        meetingAddress+=$(ele).text().trim('')+\"\\n\"","    };","});","```","It worked in previous scenario when I was trying to target on that only element, but it won't work for parsing out all the information. Therefore I reexamined the structure and found out that each location object is wrapped by a `<tr>` tag nested inside another two `<tr>` tag , and inside each location object, address details is wrapper by a pair of  `<td>` tag as well as the meetings information ( which is wrapped by another pair of  `<td>` tags). So I use the following code to target on that:","```javascript","$('tr tr tr').each(function (i, elem) {","  //location + meeting information","}","```","","**Step 2 Define and Parse Out Each Element** ","This returns all text element inside `'tr tr tr'`, my logic was that: ","find first `<td>`tag inside the text element--->it contains four lines of texts ( eg. \"Harlem Children's Zone Admin. Offices\", \"125 - TWO FOR ONE -\", \"35 East 125 Street, 1st Floor Conference Room\" , \"(@ Madison Avenue) 10035\")--->then using regular expressions and `.split` to split a string into an array of substrings---then use `.filter(Boolean)` to remove values which are \"falsey\", like empty strings or null--->the first element in the result array is location name ( eg. \"Harlem Children's Zone Admin. Offices\")","","```javascript","// LOCATION DETAILS","var location = $(elem).find('td').eq(0).text().split(/\\n|,|\\(|\\)|-/).map(item => item.trim()).filter(Boolean);","// LOCATION NAMES","var locationName = location[0];","``` ","","Same with zipcode, it's nested inside the first `<td>` tags, then I used `.split('<br>')` to break the string whenever there is a `<br>` tag, it's the fourth element so I used `[3]` to target on it.","","```javascript","// ZIPCODE","var zipcode = $(elem).html().split('<br>')[3].trim().slice(-5);","``` ","For wheelchair access information I used","","","","","**Step 3: Clean the Data**","After I parsed out all data, I used `remove()` function to remove all the unnecessary white space or line break that's inside the html structure.","```javascript","//REMOVE REDUNDANT","$(elem).find('div').eq(0).remove();","$(elem).find('b').eq(0).remove();","$(elem).find('span').eq(0).remove();","```","","**Step 4: Check the Data** ","Because JSON format is not very human readable especially when I have lots of addresses in one file (on one line) So I've used two methods to check if I get all my data out successfully.","","First I pasted the JSON data into this online  [JSON file reader](https://jsoneditoronline.org/), it translates the file structure for me more clearly and then I would be able to see if I parsed the right data or not.","","![](datachecking1.png)","","I found it's extremely useful because you can also click on the back arrow it will reformat the JSON file for you so you can see what's missing.","","![](datachecking2.png)","","Second method I borrowed Neil's idea to create a CSV file, the tabular format is readable and helps me to go over all the data I got in the end and see what I'm missing.","","![](datachecking3.png)","","","## Conclusion:",""," - Because I spend a great amount of time trying to figure out how to parse the data, I didn't really observe the results yet,  there are some group titles I found \"suspicious\", so I'm going to compare my data with each zone's txt file to see if I did anything wrong."," - I'm still trying to figure out the best way to insert the data into my SQL data base"],"id":1}],[{"start":{"row":35,"column":147},"end":{"row":35,"column":165},"action":"remove","lines":["the fourth element"],"id":2},{"start":{"row":35,"column":147},"end":{"row":35,"column":148},"action":"insert","lines":["a"]},{"start":{"row":35,"column":148},"end":{"row":35,"column":149},"action":"insert","lines":["f"]},{"start":{"row":35,"column":149},"end":{"row":35,"column":150},"action":"insert","lines":["t"]},{"start":{"row":35,"column":150},"end":{"row":35,"column":151},"action":"insert","lines":["e"]},{"start":{"row":35,"column":151},"end":{"row":35,"column":152},"action":"insert","lines":["r"]}],[{"start":{"row":35,"column":152},"end":{"row":35,"column":153},"action":"insert","lines":[" "],"id":3},{"start":{"row":35,"column":153},"end":{"row":35,"column":154},"action":"insert","lines":["3"]},{"start":{"row":35,"column":154},"end":{"row":35,"column":155},"action":"insert","lines":["r"]},{"start":{"row":35,"column":155},"end":{"row":35,"column":156},"action":"insert","lines":["d"]}],[{"start":{"row":35,"column":156},"end":{"row":35,"column":157},"action":"insert","lines":[" "],"id":4}],[{"start":{"row":35,"column":157},"end":{"row":35,"column":163},"action":"insert","lines":["`<br>`"],"id":5}],[{"start":{"row":35,"column":195},"end":{"row":35,"column":196},"action":"remove","lines":["."],"id":6}],[{"start":{"row":35,"column":195},"end":{"row":35,"column":196},"action":"insert","lines":[","],"id":7}],[{"start":{"row":35,"column":196},"end":{"row":35,"column":197},"action":"insert","lines":[" "],"id":8},{"start":{"row":35,"column":197},"end":{"row":35,"column":198},"action":"insert","lines":["a"]},{"start":{"row":35,"column":198},"end":{"row":35,"column":199},"action":"insert","lines":["f"]},{"start":{"row":35,"column":199},"end":{"row":35,"column":200},"action":"insert","lines":["t"]},{"start":{"row":35,"column":200},"end":{"row":35,"column":201},"action":"insert","lines":["e"]},{"start":{"row":35,"column":201},"end":{"row":35,"column":202},"action":"insert","lines":["r"]}],[{"start":{"row":35,"column":202},"end":{"row":35,"column":203},"action":"insert","lines":[" "],"id":9},{"start":{"row":35,"column":203},"end":{"row":35,"column":204},"action":"insert","lines":["t"]},{"start":{"row":35,"column":204},"end":{"row":35,"column":205},"action":"insert","lines":["r"]},{"start":{"row":35,"column":205},"end":{"row":35,"column":206},"action":"insert","lines":["i"]},{"start":{"row":35,"column":206},"end":{"row":35,"column":207},"action":"insert","lines":["m"]}],[{"start":{"row":35,"column":207},"end":{"row":35,"column":208},"action":"insert","lines":[" "],"id":10},{"start":{"row":35,"column":208},"end":{"row":35,"column":209},"action":"insert","lines":["a"]},{"start":{"row":35,"column":209},"end":{"row":35,"column":210},"action":"insert","lines":["l"]},{"start":{"row":35,"column":210},"end":{"row":35,"column":211},"action":"insert","lines":["l"]}],[{"start":{"row":35,"column":211},"end":{"row":35,"column":212},"action":"insert","lines":[" "],"id":11},{"start":{"row":35,"column":212},"end":{"row":35,"column":213},"action":"insert","lines":["w"]},{"start":{"row":35,"column":213},"end":{"row":35,"column":214},"action":"insert","lines":["h"]},{"start":{"row":35,"column":214},"end":{"row":35,"column":215},"action":"insert","lines":["t"]}],[{"start":{"row":35,"column":214},"end":{"row":35,"column":215},"action":"remove","lines":["t"],"id":12}],[{"start":{"row":35,"column":214},"end":{"row":35,"column":215},"action":"insert","lines":["i"],"id":13},{"start":{"row":35,"column":215},"end":{"row":35,"column":216},"action":"insert","lines":["t"]}],[{"start":{"row":35,"column":216},"end":{"row":35,"column":217},"action":"insert","lines":[" "],"id":14}],[{"start":{"row":35,"column":216},"end":{"row":35,"column":217},"action":"remove","lines":[" "],"id":15}],[{"start":{"row":35,"column":216},"end":{"row":35,"column":217},"action":"insert","lines":["e"],"id":16}],[{"start":{"row":35,"column":217},"end":{"row":35,"column":218},"action":"insert","lines":[" "],"id":17},{"start":{"row":35,"column":218},"end":{"row":35,"column":219},"action":"insert","lines":["s"]},{"start":{"row":35,"column":219},"end":{"row":35,"column":220},"action":"insert","lines":["p"]},{"start":{"row":35,"column":220},"end":{"row":35,"column":221},"action":"insert","lines":["a"]},{"start":{"row":35,"column":221},"end":{"row":35,"column":222},"action":"insert","lines":["c"]},{"start":{"row":35,"column":222},"end":{"row":35,"column":223},"action":"insert","lines":["e"]}],[{"start":{"row":35,"column":223},"end":{"row":35,"column":224},"action":"insert","lines":[","],"id":18}],[{"start":{"row":35,"column":224},"end":{"row":35,"column":225},"action":"insert","lines":[" "],"id":19},{"start":{"row":35,"column":225},"end":{"row":35,"column":226},"action":"insert","lines":["l"]},{"start":{"row":35,"column":226},"end":{"row":35,"column":227},"action":"insert","lines":["a"]},{"start":{"row":35,"column":227},"end":{"row":35,"column":228},"action":"insert","lines":["s"]},{"start":{"row":35,"column":228},"end":{"row":35,"column":229},"action":"insert","lines":["t"]}],[{"start":{"row":35,"column":229},"end":{"row":35,"column":230},"action":"insert","lines":[" "],"id":20},{"start":{"row":35,"column":230},"end":{"row":35,"column":231},"action":"insert","lines":["5"]}],[{"start":{"row":35,"column":231},"end":{"row":35,"column":232},"action":"insert","lines":[" "],"id":21},{"start":{"row":35,"column":232},"end":{"row":35,"column":233},"action":"insert","lines":["c"]},{"start":{"row":35,"column":233},"end":{"row":35,"column":234},"action":"insert","lines":["h"]},{"start":{"row":35,"column":234},"end":{"row":35,"column":235},"action":"insert","lines":["a"]},{"start":{"row":35,"column":235},"end":{"row":35,"column":236},"action":"insert","lines":["r"]},{"start":{"row":35,"column":236},"end":{"row":35,"column":237},"action":"insert","lines":["a"]},{"start":{"row":35,"column":237},"end":{"row":35,"column":238},"action":"insert","lines":["c"]},{"start":{"row":35,"column":238},"end":{"row":35,"column":239},"action":"insert","lines":["t"]},{"start":{"row":35,"column":239},"end":{"row":35,"column":240},"action":"insert","lines":["e"]},{"start":{"row":35,"column":240},"end":{"row":35,"column":241},"action":"insert","lines":["r"]},{"start":{"row":35,"column":241},"end":{"row":35,"column":242},"action":"insert","lines":["s"]}],[{"start":{"row":35,"column":242},"end":{"row":35,"column":243},"action":"insert","lines":[" "],"id":22},{"start":{"row":35,"column":243},"end":{"row":35,"column":244},"action":"insert","lines":["i"]},{"start":{"row":35,"column":244},"end":{"row":35,"column":245},"action":"insert","lines":["s"]}],[{"start":{"row":35,"column":245},"end":{"row":35,"column":246},"action":"insert","lines":[" "],"id":23},{"start":{"row":35,"column":246},"end":{"row":35,"column":247},"action":"insert","lines":["z"]},{"start":{"row":35,"column":247},"end":{"row":35,"column":248},"action":"insert","lines":["i"]},{"start":{"row":35,"column":248},"end":{"row":35,"column":249},"action":"insert","lines":["p"]},{"start":{"row":35,"column":249},"end":{"row":35,"column":250},"action":"insert","lines":["c"]},{"start":{"row":35,"column":250},"end":{"row":35,"column":251},"action":"insert","lines":["o"]},{"start":{"row":35,"column":251},"end":{"row":35,"column":252},"action":"insert","lines":["d"]},{"start":{"row":35,"column":252},"end":{"row":35,"column":253},"action":"insert","lines":["e"]}],[{"start":{"row":35,"column":253},"end":{"row":35,"column":254},"action":"insert","lines":["."],"id":24}]]},"ace":{"folds":[],"scrolltop":808.5,"scrollleft":0,"selection":{"start":{"row":68,"column":22},"end":{"row":68,"column":22},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":49,"state":["githubblock","start",["","```","javascript"],"start"],"mode":"ace/mode/markdown"}},"timestamp":1572236744074,"hash":"9aeb490962561c32daa9ff773da9e1119f6a2e6d"}