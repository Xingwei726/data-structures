{"filter":false,"title":"week7_insertData.js","tooltip":"/week7/week7_insertData.js","undoManager":{"mark":15,"position":15,"stack":[[{"start":{"row":0,"column":0},"end":{"row":30,"column":5},"action":"insert","lines":["const { Client } = require('pg');","const dotenv = require('dotenv');","const fs = require('fs');","dotenv.config({ path: '/home/ec2-user/environment/week4/.env' });","var async = require('async');","","// AWS RDS POSTGRESQL INSTANCE","const db_credentials = new Object({","   user: \"huanx429\",","   password: process.env.AWSRDS_PW,","   host: \"database-structures.c9iddlpctkv6.us-east-1.rds.amazonaws.com\",","   database: \"aa\",","   port: 5432,","});","","var rawAddresses = fs.readFileSync('../week3/data/AA091.json');","var addressesForDb = JSON.parse(rawAddresses);","","","async.eachSeries(addressesForDb, function (value, callback) {","    const client = new Client(db_credentials);","    client.connect();","    // var thisQuery = \"INSERT INTO aalocations (locationTitle, streetInfo, city, state, zip, details, wheelchair_access, zone, latitude, longitude) VALUES (E'\" + value.locationTitle + \"','\" + value.streetInfo + \"', '\" + value.city + \"', '\" + value.state + \"', '\"+ value.zip + \"', '\" + value.details + \"', '\" + value.wheelchair_access + \"', '\" + value.zone + \"', '\" + value.latitude + \"', '\"+value.longitude + \"');\";","    var thisQuery = \"INSERT INTO aalocations (locationTitle, streetInfo, city, state, zip, details, wheelchair_access, zone, latitude, longitude) VALUES (E'\" + value.meetings.locationTitle + \"','\" + value.meetings.address.streetInfo + \"', '\" + value.meetings.address.city + \"', '\" + value.meetings.address.state + \"', '\"+ value.meetings.address.zip + \"', '\" + value.meetings.address.details + \"', '\" + value.meetings.address.wheelchair_access + \"', '\" + value.meetings.address.zone + \"', '\" + value.meetings.address.latitude + \"', '\"+value.meetings.address.longitude + \"');\";","","    client.query(thisQuery, (err, res) => {","        console.log(err, res);","        client.end();","    });","    setTimeout(callback, 2000);","});  "],"id":1}],[{"start":{"row":3,"column":54},"end":{"row":3,"column":55},"action":"remove","lines":["4"],"id":2}],[{"start":{"row":3,"column":54},"end":{"row":3,"column":55},"action":"insert","lines":["7"],"id":3}],[{"start":{"row":15,"column":43},"end":{"row":15,"column":44},"action":"remove","lines":["3"],"id":4}],[{"start":{"row":15,"column":43},"end":{"row":15,"column":44},"action":"insert","lines":["7"],"id":5}],[{"start":{"row":15,"column":50},"end":{"row":15,"column":51},"action":"insert","lines":["w"],"id":6},{"start":{"row":15,"column":51},"end":{"row":15,"column":52},"action":"insert","lines":["i"]},{"start":{"row":15,"column":52},"end":{"row":15,"column":53},"action":"insert","lines":["t"]},{"start":{"row":15,"column":53},"end":{"row":15,"column":54},"action":"insert","lines":["h"]},{"start":{"row":15,"column":54},"end":{"row":15,"column":55},"action":"insert","lines":["G"]},{"start":{"row":15,"column":55},"end":{"row":15,"column":56},"action":"insert","lines":["e"]},{"start":{"row":15,"column":56},"end":{"row":15,"column":57},"action":"insert","lines":["o"]}],[{"start":{"row":15,"column":57},"end":{"row":15,"column":58},"action":"insert","lines":["/"],"id":7}],[{"start":{"row":15,"column":62},"end":{"row":15,"column":63},"action":"remove","lines":["1"],"id":8},{"start":{"row":15,"column":61},"end":{"row":15,"column":62},"action":"remove","lines":["9"]}],[{"start":{"row":15,"column":61},"end":{"row":15,"column":62},"action":"insert","lines":["1"],"id":9},{"start":{"row":15,"column":62},"end":{"row":15,"column":63},"action":"insert","lines":["G"]},{"start":{"row":15,"column":63},"end":{"row":15,"column":64},"action":"insert","lines":["e"]},{"start":{"row":15,"column":64},"end":{"row":15,"column":65},"action":"insert","lines":["o"]}],[{"start":{"row":23,"column":4},"end":{"row":23,"column":7},"action":"insert","lines":["// "],"id":10}],[{"start":{"row":22,"column":4},"end":{"row":22,"column":7},"action":"remove","lines":["// "],"id":11}],[{"start":{"row":22,"column":371},"end":{"row":22,"column":378},"action":"insert","lines":["geocode"],"id":14}],[{"start":{"row":22,"column":378},"end":{"row":22,"column":379},"action":"insert","lines":["."],"id":15}],[{"start":{"row":22,"column":402},"end":{"row":22,"column":410},"action":"insert","lines":[".geocode"],"id":16}],[{"start":{"row":22,"column":100},"end":{"row":22,"column":117},"action":"remove","lines":["wheelchair_access"],"id":17},{"start":{"row":22,"column":100},"end":{"row":22,"column":110},"action":"insert","lines":["wheelchair"]}],[{"start":{"row":22,"column":307},"end":{"row":22,"column":324},"action":"remove","lines":["wheelchair_access"],"id":18},{"start":{"row":22,"column":307},"end":{"row":22,"column":317},"action":"insert","lines":["wheelchair"]}]]},"ace":{"folds":[],"scrolltop":121.5,"scrollleft":0,"selection":{"start":{"row":20,"column":46},"end":{"row":20,"column":46},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":9,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1572304680918,"hash":"efb69fa135f25d047032687bd856dce565a4e30a"}