{"changed":true,"filter":false,"title":"week9_insertBodyTemp.js","tooltip":"/week9/week9_insertBodyTemp.js","value":"","undoManager":{"mark":43,"position":47,"stack":[[{"start":{"row":0,"column":0},"end":{"row":72,"column":0},"action":"insert","lines":["const { Client } = require('pg');","const dotenv = require('dotenv');","const fs = require('fs');","dotenv.config({ path: '/home/ec2-user/environment/week7/.env' });","var async = require('async');","","// AWS RDS POSTGRESQL INSTANCE","const db_credentials = new Object({","   user: \"huanx429\",","   password: process.env.AWSRDS_PW,","   host: \"database-structures.c9iddlpctkv6.us-east-1.rds.amazonaws.com\",","   database: \"aa\",","   port: 5432,","});","","var rawAddresses = fs.readFileSync('../week7/data/withGeo/AA010Geo.json');","var addressesForDb = JSON.parse(rawAddresses);","// var meetingsData = [];","// var meetings = {};","","// console.log(addressesForDb[1].meetings[1].meetingName)","","","//  for (let i=0; i<addressesForDb.length; i++){","//     for (let m=0; m<addressesForDb[i][\"meetings\"].length; m++){","//       meetings.meetingName = addressesForDb[i][\"meetings\"][m][\"meetingName\"]","//       meetings.day = addressesForDb[i][\"meetings\"][m][\"day\"]","","//       // meetingsData.push(meetings)","//     }","// }","","//  for (let i=0; i<addressesForDb.length; i++){","//       meetings= addressesForDb[i][\"meetings\"]","//       meetingsData.push(meetings)","// }","","// console.log(meetingsData)","// console.log(addressesForDb)","","","","async.eachSeries(addressesForDb, function (value1, callback1) {","    async.eachSeries(value1.meetings, function (value2, callback2) {","","            // aalocations table insert","            // var thisQuery = \"INSERT INTO aameetings (locationTitle, streetInfo, city, state, zip, details, wheelchair, zone, latitude, longitude, meetingName, meetingDay, TimeStart, TimeEnd, meetingType) VALUES (E'\" + value1.locationTitle + \"','\" + value1.streetInfo + \"', '\" + value1.city + \"', '\" + value1.state + \"', '\"+ value1.zip + \"', '\" + value1.details + \"', '\" + value1.wheelchair + \"', '\" + value1.zone + \"', '\" + value1.geocode.latitude + \"', '\"+value1.geocode.longitude + \"',\" + value2.meetingName + \"','\" + value2.day + \"', '\" + value2.start + \"', '\" + value2.end + \"', '\"+ value2.type + \"');\";","","        const client = new Client(db_credentials);","        client.connect();","            // aalocations table insert","            ","            var thisQuery = \"INSERT INTO aameetings (locationTitle, streetInfo, city, state, zip, details, wheelchair, zone, latitude, longitude, meetingName, meetingDay, TimeStart, TimeEnd, meetingType) VALUES (E'\" + value1.locationTitle + \"','\" + value1.streetInfo + \"', '\" + value1.city + \"', '\" + value1.state + \"', '\"+ value1.zip + \"', '\" + value1.details + \"', '\" + value1.wheelchair + \"', '\" + value1.zone + \"', '\" + value1.geocode.latitude + \"', '\"+value1.geocode.longitude + \"','\" + value2.meetingName + \"','\" + value2.day + \"', '\" + value2.start + \"', '\" + value2.end + \"', '\"+ value2.type + \"');\";","            // aameetings table insert","            // var thisQuery = \"INSERT INTO aameetings (meetingName, meetingDay, TimeStart, TimeEnd, meetingType) VALUES (E'\" + value2.meetingName + \"','\" + value2.day + \"', '\" + value2.start + \"', '\" + value2.end + \"', '\"+ value2.type + \"');\";","            // var thisQuery = \"INSERT INTO aameetings VALUES (E'\" + value2.meetingName + \"','\" + value2.day + \"', '\" + value2.start + \"', '\" + value2.end + \"', '\"+ value2.type + \"');\";","","","                client.query(thisQuery, (err, res) => {","                    console.log(err, res);","                    client.end();","                });","                setTimeout(callback2, 2000);","        });","        ","        ","    setTimeout(callback1,2000);","","    ","}); ","","",""],"id":1}],[{"start":{"row":45,"column":0},"end":{"row":48,"column":5},"action":"remove","lines":["            // aalocations table insert","            // var thisQuery = \"INSERT INTO aameetings (locationTitle, streetInfo, city, state, zip, details, wheelchair, zone, latitude, longitude, meetingName, meetingDay, TimeStart, TimeEnd, meetingType) VALUES (E'\" + value1.locationTitle + \"','\" + value1.streetInfo + \"', '\" + value1.city + \"', '\" + value1.state + \"', '\"+ value1.zip + \"', '\" + value1.details + \"', '\" + value1.wheelchair + \"', '\" + value1.zone + \"', '\" + value1.geocode.latitude + \"', '\"+value1.geocode.longitude + \"',\" + value2.meetingName + \"','\" + value2.day + \"', '\" + value2.start + \"', '\" + value2.end + \"', '\"+ value2.type + \"');\";","","     "],"id":2}],[{"start":{"row":45,"column":0},"end":{"row":45,"column":1},"action":"insert","lines":[" "],"id":3},{"start":{"row":45,"column":1},"end":{"row":45,"column":2},"action":"insert","lines":[" "]},{"start":{"row":45,"column":2},"end":{"row":45,"column":3},"action":"insert","lines":[" "]},{"start":{"row":45,"column":3},"end":{"row":45,"column":4},"action":"insert","lines":[" "]},{"start":{"row":45,"column":4},"end":{"row":45,"column":5},"action":"insert","lines":[" "]}],[{"start":{"row":17,"column":0},"end":{"row":41,"column":0},"action":"remove","lines":["// var meetingsData = [];","// var meetings = {};","","// console.log(addressesForDb[1].meetings[1].meetingName)","","","//  for (let i=0; i<addressesForDb.length; i++){","//     for (let m=0; m<addressesForDb[i][\"meetings\"].length; m++){","//       meetings.meetingName = addressesForDb[i][\"meetings\"][m][\"meetingName\"]","//       meetings.day = addressesForDb[i][\"meetings\"][m][\"day\"]","","//       // meetingsData.push(meetings)","//     }","// }","","//  for (let i=0; i<addressesForDb.length; i++){","//       meetings= addressesForDb[i][\"meetings\"]","//       meetingsData.push(meetings)","// }","","// console.log(meetingsData)","// console.log(addressesForDb)","","",""],"id":4}],[{"start":{"row":17,"column":0},"end":{"row":18,"column":0},"action":"insert","lines":["",""],"id":5}],[{"start":{"row":15,"column":43},"end":{"row":15,"column":44},"action":"remove","lines":["7"],"id":6},{"start":{"row":15,"column":43},"end":{"row":15,"column":44},"action":"insert","lines":["9"]}],[{"start":{"row":15,"column":45},"end":{"row":15,"column":71},"action":"remove","lines":["data/withGeo/AA010Geo.json"],"id":7},{"start":{"row":15,"column":45},"end":{"row":15,"column":58},"action":"insert","lines":["bodytemp.json"]}],[{"start":{"row":24,"column":0},"end":{"row":25,"column":12},"action":"remove","lines":["            // aalocations table insert","            "],"id":8}],[{"start":{"row":26,"column":0},"end":{"row":30,"column":0},"action":"remove","lines":["            // aameetings table insert","            // var thisQuery = \"INSERT INTO aameetings (meetingName, meetingDay, TimeStart, TimeEnd, meetingType) VALUES (E'\" + value2.meetingName + \"','\" + value2.day + \"', '\" + value2.start + \"', '\" + value2.end + \"', '\"+ value2.type + \"');\";","            // var thisQuery = \"INSERT INTO aameetings VALUES (E'\" + value2.meetingName + \"','\" + value2.day + \"', '\" + value2.start + \"', '\" + value2.end + \"', '\"+ value2.type + \"');\";","",""],"id":9}],[{"start":{"row":20,"column":0},"end":{"row":21,"column":0},"action":"remove","lines":["    async.eachSeries(value1.meetings, function (value2, callback2) {",""],"id":10}],[{"start":{"row":30,"column":0},"end":{"row":31,"column":0},"action":"remove","lines":["                setTimeout(callback2, 2000);",""],"id":11}],[{"start":{"row":30,"column":10},"end":{"row":30,"column":11},"action":"remove","lines":[";"],"id":12},{"start":{"row":30,"column":9},"end":{"row":30,"column":10},"action":"remove","lines":[")"]},{"start":{"row":30,"column":8},"end":{"row":30,"column":9},"action":"remove","lines":["}"]},{"start":{"row":30,"column":4},"end":{"row":30,"column":8},"action":"remove","lines":["    "]},{"start":{"row":30,"column":0},"end":{"row":30,"column":4},"action":"remove","lines":["    "]},{"start":{"row":29,"column":19},"end":{"row":30,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":26,"column":0},"end":{"row":26,"column":4},"action":"remove","lines":["    "],"id":13},{"start":{"row":27,"column":0},"end":{"row":27,"column":4},"action":"remove","lines":["    "]},{"start":{"row":28,"column":0},"end":{"row":28,"column":4},"action":"remove","lines":["    "]},{"start":{"row":29,"column":0},"end":{"row":29,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":24,"column":0},"end":{"row":24,"column":4},"action":"remove","lines":["    "],"id":14},{"start":{"row":26,"column":0},"end":{"row":26,"column":4},"action":"remove","lines":["    "]},{"start":{"row":27,"column":0},"end":{"row":27,"column":4},"action":"remove","lines":["    "]},{"start":{"row":28,"column":0},"end":{"row":28,"column":4},"action":"remove","lines":["    "]},{"start":{"row":29,"column":0},"end":{"row":29,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":31,"column":4},"end":{"row":31,"column":8},"action":"remove","lines":["    "],"id":15},{"start":{"row":31,"column":0},"end":{"row":31,"column":4},"action":"remove","lines":["    "]},{"start":{"row":30,"column":8},"end":{"row":31,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":32,"column":0},"end":{"row":33,"column":4},"action":"remove","lines":["","    "],"id":16}],[{"start":{"row":31,"column":23},"end":{"row":31,"column":24},"action":"remove","lines":["1"],"id":17}],[{"start":{"row":19,"column":59},"end":{"row":19,"column":60},"action":"remove","lines":["1"],"id":18}],[{"start":{"row":19,"column":48},"end":{"row":19,"column":49},"action":"remove","lines":["1"],"id":19}],[{"start":{"row":15,"column":7},"end":{"row":15,"column":16},"action":"remove","lines":["Addresses"],"id":20},{"start":{"row":15,"column":7},"end":{"row":15,"column":8},"action":"insert","lines":["T"]},{"start":{"row":15,"column":8},"end":{"row":15,"column":9},"action":"insert","lines":["e"]},{"start":{"row":15,"column":9},"end":{"row":15,"column":10},"action":"insert","lines":["m"]},{"start":{"row":15,"column":10},"end":{"row":15,"column":11},"action":"insert","lines":["p"]}],[{"start":{"row":16,"column":32},"end":{"row":16,"column":44},"action":"remove","lines":["rawAddresses"],"id":21},{"start":{"row":16,"column":32},"end":{"row":16,"column":33},"action":"insert","lines":["r"]},{"start":{"row":16,"column":33},"end":{"row":16,"column":34},"action":"insert","lines":["s"]},{"start":{"row":16,"column":34},"end":{"row":16,"column":35},"action":"insert","lines":["w"]}],[{"start":{"row":16,"column":34},"end":{"row":16,"column":35},"action":"remove","lines":["w"],"id":22},{"start":{"row":16,"column":33},"end":{"row":16,"column":34},"action":"remove","lines":["s"]}],[{"start":{"row":16,"column":33},"end":{"row":16,"column":34},"action":"insert","lines":["a"],"id":23},{"start":{"row":16,"column":34},"end":{"row":16,"column":35},"action":"insert","lines":["w"]},{"start":{"row":16,"column":35},"end":{"row":16,"column":36},"action":"insert","lines":["T"]},{"start":{"row":16,"column":36},"end":{"row":16,"column":37},"action":"insert","lines":["e"]},{"start":{"row":16,"column":37},"end":{"row":16,"column":38},"action":"insert","lines":["m"]},{"start":{"row":16,"column":38},"end":{"row":16,"column":39},"action":"insert","lines":["p"]}],[{"start":{"row":16,"column":4},"end":{"row":16,"column":18},"action":"remove","lines":["addressesForDb"],"id":24},{"start":{"row":16,"column":4},"end":{"row":16,"column":5},"action":"insert","lines":["b"]},{"start":{"row":16,"column":5},"end":{"row":16,"column":6},"action":"insert","lines":["o"]},{"start":{"row":16,"column":6},"end":{"row":16,"column":7},"action":"insert","lines":["d"]},{"start":{"row":16,"column":7},"end":{"row":16,"column":8},"action":"insert","lines":["y"]}],[{"start":{"row":16,"column":8},"end":{"row":16,"column":9},"action":"insert","lines":["T"],"id":25},{"start":{"row":16,"column":9},"end":{"row":16,"column":10},"action":"insert","lines":["e"]},{"start":{"row":16,"column":10},"end":{"row":16,"column":11},"action":"insert","lines":["m"]},{"start":{"row":16,"column":11},"end":{"row":16,"column":12},"action":"insert","lines":["p"]}],[{"start":{"row":19,"column":17},"end":{"row":19,"column":31},"action":"remove","lines":["addressesForDb"],"id":26},{"start":{"row":19,"column":17},"end":{"row":19,"column":25},"action":"insert","lines":["bodyTemp"]}],[{"start":{"row":24,"column":49},"end":{"row":24,"column":198},"action":"remove","lines":["locationTitle, streetInfo, city, state, zip, details, wheelchair, zone, latitude, longitude, meetingName, meetingDay, TimeStart, TimeEnd, meetingType"],"id":27}],[{"start":{"row":24,"column":49},"end":{"row":27,"column":68},"action":"insert","lines":["tempDate varchar(25),","                                          tempDay varchar(25),","                                          tempTime varchar(25),","                                          tempValue double precision"],"id":28}],[{"start":{"row":24,"column":57},"end":{"row":24,"column":70},"action":"remove","lines":[" varchar(25),"],"id":29}],[{"start":{"row":24,"column":57},"end":{"row":25,"column":42},"action":"remove","lines":["","                                          "],"id":30}],[{"start":{"row":24,"column":57},"end":{"row":24,"column":58},"action":"insert","lines":[","],"id":31}],[{"start":{"row":24,"column":58},"end":{"row":24,"column":59},"action":"insert","lines":[" "],"id":32}],[{"start":{"row":24,"column":66},"end":{"row":25,"column":41},"action":"remove","lines":[" varchar(25),","                                         "],"id":33}],[{"start":{"row":24,"column":66},"end":{"row":24,"column":67},"action":"insert","lines":[","],"id":34}],[{"start":{"row":24,"column":76},"end":{"row":25,"column":41},"action":"remove","lines":[" varchar(25),","                                         "],"id":35}],[{"start":{"row":24,"column":76},"end":{"row":24,"column":77},"action":"remove","lines":[" "],"id":36}],[{"start":{"row":24,"column":76},"end":{"row":24,"column":77},"action":"insert","lines":[","],"id":37}],[{"start":{"row":24,"column":77},"end":{"row":24,"column":78},"action":"insert","lines":[" "],"id":38}],[{"start":{"row":24,"column":87},"end":{"row":24,"column":104},"action":"remove","lines":[" double precision"],"id":39}],[{"start":{"row":24,"column":103},"end":{"row":24,"column":109},"action":"remove","lines":["value1"],"id":40},{"start":{"row":24,"column":103},"end":{"row":24,"column":108},"action":"insert","lines":["value"]}],[{"start":{"row":24,"column":133},"end":{"row":24,"column":139},"action":"remove","lines":["value1"],"id":41},{"start":{"row":24,"column":133},"end":{"row":24,"column":138},"action":"insert","lines":["value"]}],[{"start":{"row":24,"column":161},"end":{"row":24,"column":167},"action":"remove","lines":["value1"],"id":42},{"start":{"row":24,"column":161},"end":{"row":24,"column":166},"action":"insert","lines":["value"]}],[{"start":{"row":24,"column":183},"end":{"row":24,"column":189},"action":"remove","lines":["value1"],"id":43},{"start":{"row":24,"column":183},"end":{"row":24,"column":188},"action":"insert","lines":["value"]}],[{"start":{"row":24,"column":199},"end":{"row":24,"column":485},"action":"remove","lines":[", '\"+ value1.zip + \"', '\" + value1.details + \"', '\" + value1.wheelchair + \"', '\" + value1.zone + \"', '\" + value1.geocode.latitude + \"', '\"+value1.geocode.longitude + \"','\" + value2.meetingName + \"','\" + value2.day + \"', '\" + value2.start + \"', '\" + value2.end + \"', '\"+ value2.type + \"'"],"id":44}],[{"start":{"row":24,"column":109},"end":{"row":24,"column":122},"action":"remove","lines":["locationTitle"],"id":45},{"start":{"row":24,"column":109},"end":{"row":24,"column":112},"action":"insert","lines":["Day"]}],[{"start":{"row":24,"column":129},"end":{"row":24,"column":139},"action":"remove","lines":["streetInfo"],"id":46},{"start":{"row":24,"column":129},"end":{"row":24,"column":133},"action":"insert","lines":["Date"]}],[{"start":{"row":24,"column":151},"end":{"row":24,"column":155},"action":"remove","lines":["city"],"id":47},{"start":{"row":24,"column":151},"end":{"row":24,"column":155},"action":"insert","lines":["Time"]}],[{"start":{"row":24,"column":173},"end":{"row":24,"column":178},"action":"remove","lines":["state"],"id":48},{"start":{"row":24,"column":173},"end":{"row":24,"column":184},"action":"insert","lines":["Temperature"]}]]},"ace":{"folds":[],"scrolltop":204.5,"scrollleft":0,"selection":{"start":{"row":20,"column":0},"end":{"row":20,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":11,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1574464878586}